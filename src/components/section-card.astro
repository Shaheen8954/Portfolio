---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
  CardFooter,
} from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { cn } from '@/lib/utils';

export type Props = {
  title: string;
  categoryText?: string;
  tags?: Array<string>;
  imageUrl?: ImageMetadata;
  imageAltText?: string;
  className?: string;
  classNameHeader?: string;
  classNameTitle?: string;
  classNameContent?: string;
  classNameFooter?: string;
};

const {
  title,
  categoryText,
  tags,
  imageUrl,
  imageAltText,
  className,
  classNameHeader,
  classNameTitle,
  classNameContent,
  classNameFooter,
} = Astro.props;
---

<Card className={cn('relative group h-full flex flex-col rounded-xl border border-dotted border-border/40 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:border-primary/60 hover:bg-accent/5', className)}>
  <div aria-hidden class="pointer-events-none absolute inset-0 -m-2 rounded-2xl border border-dotted border-border/40 opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
  <CardHeader className={cn('pb-4', classNameHeader)}>
    <CardTitle
      className={cn(
        'text-2xl font-semibold leading-none tracking-tight',
        classNameTitle
      )}
    >
      {title}
    </CardTitle>
    {
      categoryText && (
        <CardDescription className="text-sm text-muted-foreground pt-1">
          {categoryText}
        </CardDescription>
      )
    }
  </CardHeader>
  <CardContent className={cn('space-y-4 flex-grow', classNameContent)}>
    {
      imageUrl && imageAltText && (
        <div class="mb-4 overflow-hidden rounded-md">
          <Image
            src={imageUrl}
            alt={imageAltText}
            class="h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105"
            loading="lazy"
            width={400}
            height={300}
            densities={[1, 1.5, 2]}
            quality="medium"
          />
        </div>
      )
    }
    <slot />
  </CardContent>
  {
    tags && tags.length > 0 && (
      <CardFooter className={cn('flex flex-wrap gap-2 pt-4', classNameFooter)}>
        {tags.map((tag) => (
          <Badge variant="secondary" key={tag}>
            {tag}
          </Badge>
        ))}
      </CardFooter>
    )
  }
</Card>
